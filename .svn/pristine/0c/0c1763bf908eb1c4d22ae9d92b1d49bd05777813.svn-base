$(function(){initAddProj();initImportProj()});function delProj(a){bootbox.confirm("确定执行删除操作？",function(){var b=new Object();b.projId=a;doPost("auth/proj/json/del.htm",b,function(c){notice("删除成功",function(){location.reload()})})})}function copyProj(b,a){bootbox.confirm("确定复制当前项目？",function(){var c=new Object();c.projId=b;doPost("auth/proj/json/copy.htm",c,function(d){notice("复制并创建成功",function(){var e=window.location.href;window.location.href=e.replace(window.location.search,"")+$.query.set("name",a+$("#copyFlag").val())})})})}function quitProj(a){bootbox.confirm("确定退出当前项目？",function(){var b=new Object();b.projId=a;doPost("auth/proj/json/quit.htm",b,function(c){location.reload()})})}function initAddProj(){$("#projForm").bootstrapValidator({fields:{name:{validators:{notEmpty:{message:"项目名称不能为空"}}}}});$("#saveProjBtn").click(function(){if(isFormValid("projForm")){var a=$("#projForm").find("*").getFieldsValue();doPost("auth/proj/json/add.htm",a,function(b){notice("保存成功",function(){$("#projFormModal").modal("hide");location.reload()})})}})}function initImportProj(){$("#importFileForm").bootstrapValidator({fields:{jsonFile:{validators:{notEmpty:{message:"请选择json文件"}}}},submitHandler:function(b,c,a){if(isFormValid("importFileForm")){b.defaultSubmit()}}});$("#importUrlForm").bootstrapValidator({fields:{jsonUrl:{validators:{notEmpty:{message:"url不能为空"},url:{message:"url格式错误"}}}},submitHandler:function(b,c,a){if(isFormValid("importUrlForm")){b.defaultSubmit()}}});$("#cancelImportBtn").click(function(){resetValidForm("importFileForm");resetValidForm("importUrlForm")})};